<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal AI Assistant</title>
    <style>
        /* CSS जस का तस रहेगा */
        body{margin:0;font-family:'Segoe UI','Roboto','Helvetica Neue',sans-serif;background-color:#1a1a1a;display:flex;justify-content:center;align-items:center;min-height:100vh}.phone-container{width:375px;height:812px;background-color:#000;border-radius:40px;border:1px solid #333;box-shadow:0 10px 30px rgba(0,0,0,.5);position:relative;overflow:hidden;display:flex;flex-direction:column;color:#fff}.header{padding:40px 30px 10px;display:flex;flex-direction:column;align-items:center}.ai-buddy-chip{background-color:#cfff5e;color:#000;padding:8px 16px;border-radius:20px;font-weight:700;font-size:14px}.online-status{display:flex;align-items:center;gap:6px;margin-top:10px;font-size:12px;color:#aaa}.online-dot{width:8px;height:8px;background-color:#cfff5e;border-radius:50%}.main-content{flex-grow:1;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 20px;text-align:center}.ai-orb{width:200px;height:200px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff,#d1e2ff,#b3c8ff,#a4aaff,#c7a4ff,#433d8b,#000 70%);box-shadow:0 0 40px rgba(199,164,255,.4);animation:pulse 5s infinite ease-in-out;margin-bottom:40px}@keyframes pulse{0%{transform:scale(1);opacity:.9}50%{transform:scale(1.05);opacity:1}100%{transform:scale(1);opacity:.9}}.transcribed-text{min-height:60px;font-size:22px;line-height:1.4;color:#e0e0e0}.controls{padding:20px 30px 40px;display:flex;justify-content:space-around;align-items:center}.mic-button{width:80px;height:80px;background-color:#cfff5e;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;border:none;position:relative;transition:transform .2s ease}.mic-button:active{transform:scale(.95)}.mic-button.listening::before{content:'';position:absolute;top:-15px;left:-15px;right:-15px;bottom:-15px;border:2px solid #cfff5e;border-radius:50%;animation:listening-wave 1.5s infinite ease-out;opacity:0}@keyframes listening-wave{0%{transform:scale(.8);opacity:1}100%{transform:scale(1.2);opacity:0}}.mic-icon{width:36px;height:36px}.side-button{width:44px;height:44px;background-color:#2c2c2e;border:none;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer}.side-button svg{width:20px;height:20px}
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="header">
            <div class="ai-buddy-chip">AI Buddy</div>
            <div class="online-status">
                <div class="online-dot"></div>
                <span>Online</span>
            </div>
        </div>
        <div class="main-content">
            <div class="ai-orb"></div>
            <p class="transcribed-text" id="transcribedText">
                Tap the mic and give a command
            </p>
        </div>
        <div class="controls">
             <button class="side-button" aria-label="Keyboard">
                 <svg fill="white" viewBox="0 0 24 24"><path d="M20 5H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"></path></svg>
             </button>
            <button class="mic-button" id="micButton" aria-label="Start voice command">
                <svg class="mic-icon" fill="black" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"></path></svg>
            </button>
            <button class="side-button" aria-label="Close">
                 <svg fill="white" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
            </button>
        </div>
    </div>

    <script>
        // JavaScript - ऐप की फंक्शनैलिटी
        const micButton = document.getElementById('micButton');
        const transcribedText = document.getElementById('transcribedText');

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        
        if (SpeechRecognition) {
            const recognition = new SpeechRecognition();
            
            recognition.continuous = false;
            recognition.lang = 'en-US';

            // --- नया बदलाव 1: बोलने वाला फंक्शन ---
            function speak(text) {
                // पहले से चल रही किसी भी स्पीच को रद्द करें
                window.speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US'; // प्रतिक्रिया की भाषा
                utterance.rate = 1; // बोलने की गति (0.1 से 10 तक)
                utterance.pitch = 1; // आवाज़ का उतार-चढ़ाव (0 से 2 तक)
                
                // ब्राउज़र को टेक्स्ट बोलने का आदेश दें
                window.speechSynthesis.speak(utterance);
            }
            
            micButton.addEventListener('click', () => {
                transcribedText.textContent = 'Listening...';
                micButton.classList.add('listening');
                try {
                    recognition.start();
                } catch(error) {
                    console.error("Error starting recognition:", error);
                    micButton.classList.remove('listening');
                    transcribedText.textContent = 'Recognition could not be started.';
                }
            });

            // --- नया बदलाव 2: कमांड के जवाब में speak() को कॉल करना ---
            recognition.onresult = (event) => {
                const current = event.resultIndex;
                const transcript = event.results[current][0].transcript.toLowerCase().trim();
                
                let reply = ''; // जवाब के लिए एक वेरिएबल

                if (transcript.includes('hello buddy')) {
                    reply = 'Hello sir, how can I help you?';
                } else if (transcript.includes('open youtube')) {
                    reply = 'Opening YouTube...';
                    window.open('https://www.youtube.com', '_blank');
                } else if (transcript.includes('open instagram')) {
                    reply = 'Opening Instagram...';
                    window.open('https://www.instagram.com', '_blank');
                } else {
                    // अगर कोई कमांड मैच नहीं होता, तो सिर्फ बोला गया टेक्स्ट दिखाएं
                    // और कोई जवाब न बोलें
                    transcribedText.textContent = `You said: "${transcript}"`;
                    return; // फंक्शन को यहीं रोक दें
                }
                
                // स्क्रीन पर जवाब दिखाएं
                transcribedText.textContent = reply;
                // AI को जवाब बोलने के लिए कहें
                speak(reply);
            };

            recognition.onend = () => {
                micButton.classList.remove('listening');
                if (transcribedText.textContent === 'Listening...') {
                    transcribedText.textContent = 'Tap the mic and give a command';
                }
            };
            
            recognition.onerror = (event) => {
                console.error("Speech recognition error:", event.error, event.message);
                let errorMessage = `Error: ${event.error}`;
                if (event.error === 'not-allowed') {
                    errorMessage = 'Microphone access was denied.';
                } else if (event.error === 'no-speech') {
                    errorMessage = 'No speech was detected. Please try again.';
                }
                transcribedText.textContent = errorMessage;
                micButton.classList.remove('listening');
            };

        } else {
            transcribedText.textContent = "Sorry, your browser doesn't support Speech Recognition.";
            micButton.disabled = true;
        }
        
        document.querySelector('[aria-label="Keyboard"]').addEventListener('click', () => {
            alert('Keyboard button clicked!');
        });

        document.querySelector('[aria-label="Close"]').addEventListener('click', () => {
            alert('Close button clicked!');
        });
        
    </script>
</body>
</html>
